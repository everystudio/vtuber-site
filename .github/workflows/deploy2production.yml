name: ğŸš€ æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆæ‰‹å‹•ï¼‰

on:
  workflow_dispatch: # â† æ‰‹å‹•å®Ÿè¡Œã ã‘è¨±å¯

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v3

      - name: Reactãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
        working-directory: frontend
        run: |
          CI=false npm ci
          CI=false npm run build

      # === React ==========
      - name: ãƒ‡ãƒ—ãƒ­ã‚¤1ï¼ˆFTPã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
        uses: SamKirkland/FTP-Deploy-Action@4.3.0
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          local-dir: ./frontend/build/  # â† ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ
          server-dir: anoliver.com/public_html/
          exclude: |
            **/.git*
            **/.github*
            **/node_modules/**
            **/frontend/**
            !frontend/build/**

      # === backend/api ==========
      - name: ãƒ‡ãƒ—ãƒ­ã‚¤2ï¼ˆFTPã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
        uses: SamKirkland/FTP-Deploy-Action@4.3.0
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          local-dir: ./backend/api/  # â† ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ
          server-dir: anoliver.com/public_html/api/
          exclude: |
            **/.git*
            **/.github*
            **/node_modules/**
            **/frontend/**
            !frontend/build/**

      # === backend/includes ==========
      - name: ãƒ‡ãƒ—ãƒ­ã‚¤3ï¼ˆFTPã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
        uses: SamKirkland/FTP-Deploy-Action@4.3.0
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          local-dir: ./backend/includes/  # â† ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ
          server-dir: anoliver.com/public_html/includes/
          exclude: |
            .env*
            .git*
            **/.github*
            **/node_modules/**
            **/frontend/**
            !frontend/build/**




            
            backend/includes/.env*
